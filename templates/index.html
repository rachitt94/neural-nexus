<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEURAL NEXUS | 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&display=swap');
        body { margin: 0; background: #000; color: #fff; font-family: 'Syncopate', sans-serif; overflow: hidden; }
        
        .glass-ui {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 80px;
            padding: 15px 45px;
            pointer-events: auto;
        }

        input {
            background: transparent;
            border: none;
            outline: none;
            color: white;
            text-align: center;
            width: 320px;
            letter-spacing: 5px;
            font-size: 11px;
            text-transform: uppercase;
        }

        .hud {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
        }
    </style>
</head>
<body>
    <div class="hud">
        <div class="flex justify-between items-start">
            <div class="opacity-80">
                <h1 class="text-2xl font-bold tracking-[12px]">NEURAL NEXUS</h1>
                <p class="text-[7px] mt-1 opacity-40">REAL-TIME SHADER CORE // 2026</p>
            </div>
        </div>

        <div class="flex justify-center">
            <div class="glass-ui">
                <input type="text" id="cmd" placeholder="INJECT DNA (PLASMA, GOLD, MATRIX, VOID)" autocomplete="off">
            </div>
        </div>

        <div class="flex justify-between items-end text-[7px] opacity-20 uppercase tracking-widest">
            <div>Â© ARCHITECT LABS</div>
            <div id="status">SYS_STATUS: OPTIMAL</div>
        </div>
    </div>

    <script>
        let scene, camera, renderer, material;
        let currentDna = { color: '#444444', speed: 1.0, distort: 0.2 };

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
            const geometry = new THREE.PlaneBufferGeometry(2, 2);
            
            material = new THREE.ShaderMaterial({
                uniforms: {
                    u_time: { value: 0 },
                    u_mouse: { value: new THREE.Vector2() },
                    u_resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },
                    u_color: { value: new THREE.Color(currentDna.color) },
                    u_speed: { value: currentDna.speed },
                    u_distort: { value: currentDna.distort }
                },
                vertexShader: `void main() { gl_Position = vec4(position, 1.0); }`,
                fragmentShader: `
                    uniform float u_time;
                    uniform vec2 u_mouse;
                    uniform vec2 u_resolution;
                    uniform vec3 u_color;
                    uniform float u_speed;
                    uniform float u_distort;

                    void main() {
                        vec2 uv = gl_FragCoord.xy / u_resolution.xy;
                        vec2 p = -1.0 + 2.0 * uv;
                        p.x *= u_resolution.x / u_resolution.y;
                        float t = u_time * u_speed;
                        for(int i=1; i<10; i++) {
                            p.x += u_distort / float(i) * sin(float(i) * 3.0 * p.y + t + u_mouse.x);
                            p.y += u_distort / float(i) * cos(float(i) * 3.0 * p.x + t + u_mouse.y);
                        }
                        gl_FragColor = vec4(u_color / (length(p) * 1.5), 1.0);
                    }
                `
            });

            scene.add(new THREE.Mesh(geometry, material));
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            material.uniforms.u_time.value += 0.01;
            renderer.render(scene, camera);
        }

        window.addEventListener('mousemove', (e) => {
            material.uniforms.u_mouse.value.set((e.clientX/window.innerWidth)*2-1, -(e.clientY/window.innerHeight)*2+1);
        });

        document.getElementById('cmd').addEventListener('keypress', async (e) => {
            if (e.key === 'Enter') {
                const response = await fetch('/mutate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ command: e.target.value })
                });
                const dna = await response.json();
                material.uniforms.u_color.value.set(dna.color);
                material.uniforms.u_speed.value = dna.speed;
                material.uniforms.u_distort.value = dna.distortion;
                document.getElementById('status').innerText = "MODE: " + dna.mode.toUpperCase();
                e.target.value = "";
            }
        });

        init();
    </script>
</body>
</html>
